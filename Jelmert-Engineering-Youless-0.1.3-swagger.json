{
  "openapi" : "3.0.0",
  "info" : {
    "version" : "0.1.3",
    "title" : "Youless energy monitor",
    "description" : ""
  },
  "servers" : [ {
    "description" : "Local device",
    "url" : "http://192.168.178.206/"
  } ],
  "components" : {
    "schemas" : {
      "DeviceSchema" : {
        "type" : "object",
        "properties" : {
          "model" : {
            "type" : "string"
          },
          "mac" : {
            "type" : "string"
          }
        }
      },
      "OutputFormat" : {
        "type" : "string",
        "enum" : [ "j" ]
      },
      "BasicStatusInfo" : {
        "type" : "object",
        "properties" : {
          "cnt" : {
            "type" : "string",
            "description" : "counter in kWh"
          },
          "pwr" : {
            "type" : "integer",
            "description" : "Power consumption in Watt"
          },
          "lvl" : {
            "type" : "integer",
            "description" : "moving average level (intensity of reflected light on analog meters)"
          },
          "dev" : {
            "type" : "string",
            "description" : "deviation of reflection"
          },
          "det" : {
            "type" : "string"
          },
          "con" : {
            "type" : "string",
            "description" : "connection status"
          },
          "sts" : {
            "type" : "string",
            "description" : "Time until next status update with online monitoring"
          },
          "cs0" : {
            "type" : "string",
            "description" : "kWh counter of S0 input"
          },
          "ps0" : {
            "description" : "Computed power",
            "type" : "integer"
          },
          "raw" : {
            "type" : "integer",
            "description" : "raw 10-bit light reflection level (without averaging)"
          }
        }
      }
    }
  },
  "tags" : [ {
    "name" : "Test"
  } ],
  "paths" : {
    "/a" : {
      "get" : {
        "description" : "Basic status info",
        "parameters" : [ {
          "in" : "query",
          "name" : "f",
          "required" : false,
          "schema" : {
            "$ref" : "#/components/schemas/OutputFormat"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Ok",
            "content" : {
              "appliation/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/BasicStatusInfo"
                }
              },
              "text/plain" : { }
            }
          }
        }
      }
    },
    "/d" : {
      "get" : {
        "description" : "Device info",
        "responses" : {
          "200" : {
            "description" : "Ok",
            "content" : {
              "appliation/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/DeviceSchema"
                }
              }
            }
          }
        }
      }
    }
  }
}